
@{
    ViewData["Title"] = "Home Page";
}

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <div class="carousel-caption" role="option">
                <h1>
                    DONT MISS MARIO'S FOODS!
                </h1>
            </div>
            <img src="~/images/banner1.png" alt="ASP.NET" class="img-responsive" />

        </div>
        <div class="item">
            <div class="carousel-caption" role="option">
                <h1>
                    MARIO RICE VEGIE COMBO
                </h1>
            </div>

            <img src="~/images/riceCombo.jpg" alt="Visual Studio" class="img-responsive" />
        </div>
        <div class="item">
            <div class="carousel-caption" role="option">
                <h1>
                    MARIO SHEKLA TIBS
                </h1>
            </div>
            <img src="~/images/sheklaTibs.jpg" alt="Package Management" class="img-responsive" />

        </div>
        <div class="item">
            <div class="carousel-caption caption-top" role="option">
                <h1>
                    MARIO VEGIE COMBO
                </h1>
            </div>
            <img src="~/images/vegieCombo.jpg" alt="Microsoft Azure" class="img-responsive" />
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<div>
</div><hr />
<br />
<h1 style="text-align: center">OUR TOP THREE HIGHLY RATED PRODUCTS</h1>
<br />
<hr />

@if (ViewBag.model != null)
{
    <div class="card-deck">

        @foreach (Product item in ViewBag.model["topThreeRated"])
        {
            <div class="card">
                <div class="ratingReview">
                    <h1 class="card-title">@item.Name-@item.AverageRating()</h1>

                    @if (item.Reviews != null)
                    {
                        <a href="@Url.Action("GetReviewsForProduct", "Home", new { id = item.ProductId})">
                            <p class="card-text">@item.Reviews.Count() total review(s)</p>
                        </a>
                        <h4>Average Rating: @item.AverageRating()</h4>
                        @for (var i = 1; i <= item.AverageRating(); i++)
                        {
                            <span class="starGlowN"></span>
                        }
                        @for (var i = (item.AverageRating() + 1); i <= 5; i++)
                        {
                            <span class="starFadeN"></span>
                        }

                    }
                </div>

                @if (item.ProductImg != null)
                {
                    String img64 = Convert.ToBase64String(item.ProductImg);
                    String img64Url = string.Format("data:image/" + item.ProductImg + ";base64,{0}", img64); //imagetype can be e.g. gif, jpeg, png etc.
                    <a href="@Url.Action("Details", "Products", new { id = item.ProductId})"><img class="deckImg" src="@img64Url" alt="@item.ProductImg" /></a>
                }


                <hr />
                <br />
            </div>
        }
    </div>
    <div>
        <h1 style="text-align: center">OUR MOST RECENTLY ADDED PRODUCTS</h1>
        <br />
        <hr />
    </div>

    <div class="card-deck">

        @foreach (Product item in ViewBag.model["topThreeLatest"])
        {
            <div class="card">
                <div class="ratingReview">
                    <h1 class="card-title">@item.Name-@item.AverageRating()</h1>

                    @if (item.Reviews != null)
                    {
                        <a href="@Url.Action("GetReviewsForProduct", "Home", new { id = item.ProductId})">
                            <p class="card-text">@item.Reviews.Count() total review(s)</p>
                        </a>
                        <h4>Average Rating: @item.AverageRating()</h4>
                        @for (var i = 1; i <= item.AverageRating(); i++)
                        {
                            <span class="starGlowN"></span>
                        }
                        @for (var i = (item.AverageRating() + 1); i <= 5; i++)
                        {
                            <span class="starFadeN"></span>
                        }

                    }
                </div>

                @if (item.ProductImg != null)
                {
                    String img64 = Convert.ToBase64String(item.ProductImg);
                    String img64Url = string.Format("data:image/" + item.ProductImg + ";base64,{0}", img64); //imagetype can be e.g. gif, jpeg, png etc.
                    <a href="@Url.Action("Details", "Products", new { id = item.ProductId})"><img class="deckImg" src="@img64Url" alt="@item.ProductImg" /></a>
                }

                <hr />
                <br />
            </div>
        }
    </div>

}

